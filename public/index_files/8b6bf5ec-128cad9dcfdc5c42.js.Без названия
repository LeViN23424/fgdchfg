"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6457],{49291:function(e,t,n){n.d(t,{Z:function(){return NewsletterSignup$1}});var s=n(55319),i=n(77959),a=n(94890),l=n(35960),r=n(33201),o=n(53),c=n(56284),d=n(82051),u=n(90200),p=n(2550),g=n(46379),b=n(37548),w=n(4671),S=n(13846),y=n(90026),m=n(79e3),h=n(56338),k=n(60766),v=n(53845),x=n(49833),j=n(59617),f=n(9287),P=n(85893);let z=(0,l.v)(w.J),B=(0,l.v)(S.x),$=(0,l.v)(y.j),T=[j.GE,j.kx],C=["701","702","705","707","708"],_={2:"wsj",30:"barrons",200:"mansionglobal",201:"fnlondon",202:"penews"},E={inline:{actionablesTopSpace:"space060",switchSize:"medium",unsubActionablesFlow:"horizontal-center",unsubButtonMarginType:"marginInlineStart",feedbackSize:"sizing070"},rail:{actionablesTopSpace:"space050",switchSize:"small",unsubActionablesFlow:"vertical-center",unsubButtonMarginType:"marginBlockStart",feedbackSize:"sizing070"},rootRowStackedRailModal:{actionablesTopSpace:"space050",descriptionFont:"utilityBody020",switchSize:"small",unsubActionablesFlow:"vertical-center",unsubButtonMarginType:"marginBlockStart",feedbackSize:"0",newsletterHeadingType:"utilityHeading030"},pro:{actionablesTopSpace:"space050",switchSize:"small",unsubActionablesFlow:"vertical-center",unsubButtonMarginType:"marginBlockStart",feedbackSize:"sizing070",newsletterHeadingType:"utilityHeading020",newsletterHeadingStylePre:"neutral900",descriptionFont:"utilityBody030",marginInlineEndOverride:"space110",buttonStylePre:"buttonMinimalPositive"}},I=` {
  .text-stack {
    flex: 0.7;
  }
   .actions {
    flex: 0.3;
  }
}
`,F=(0,s.Z)(r.K,{target:"efuij7j5",label:"ActionsStack"})(({actionsGap:e})=>e&&`gap: ${e};`,";"),M=(0,s.Z)(r.K,{target:"efuij7j4",label:"RootStack"})(({rootStackGap:e})=>e&&`gap: ${e};`,";"),N=(0,s.Z)(o.g,{target:"efuij7j3",label:"FullBlock"})("width:100%;",({zIndex:e})=>e&&`z-index: ${e};`," ",({kind:e,rootLayoutMQ:t})=>void 0!==t?t:"rootRowStackedRailModal"===e?`
        ${m.sP.sm}${I}
        ${m.sP.md}${I}
        ${m.sP.lg}${I}
        `:"",({theme:e,isUnsubscribe:t})=>t&&`background-color: ${e.colors.interface020}`,";"),H=(0,s.Z)(c.z,{target:"efuij7j2",label:"StyledButton"})({name:"1bmnxg7",styles:"white-space:nowrap"}),U=(0,s.Z)(d.a,{target:"efuij7j1",label:"CenteredTextBlock"})({name:"1azakc",styles:"text-align:center"}),Z=(0,s.Z)(u.r,{target:"efuij7j0",label:"StyledSwitch"})({name:"1d3w5wq",styles:"width:100%"}),ModalHeader=({hasError:e=!1,title:t=""})=>(0,P.jsxs)(r.K,{flow:"horizontal-center",children:[e&&(0,P.jsx)($,{overrides:{size:"iconSize020",stylePreset:"iconNegative"}}),(0,P.jsx)(d.a,{marginInlineStart:"space045",typographyPreset:"editorialHeadline050",children:t})]}),getActionablesDistribution=(e,t,n)=>e?"center":t?"flex-start":n?"flex-end":"space-between",setUtagEvent=(e,t,n,s)=>{if(!window.utag)return null;let i={event_name:e,newsletter_category:"Newsletter",newsletter_frequency:"Immediately",newsletter_name:t};return n?window.utag.link({...i,newsletter_id:n,...s&&{module_tracker:s}}):window.utag.link({...i})},getProductName=e=>2===e?"WSJ":30===e?"BARRONS":"WSJ";var NewsletterSignup$1=({acknowledgeOnSave:e=!1,actionsGap:t="24px",data:n,editionId:s,email:l="",hasFeedbackIcons:o=!1,hasOrg:u=!1,hasTitle:w=!0,ibdEndpoint:S="",instantToggle:y=!1,isActionsAlignedLeft:m=!1,isAutomated:$=!1,isCentered:I=!1,isLoggedIn:D=!1,isMinimal:A=!1,isRowMode:O=!1,isWSJPlus:W=!1,kind:L="rail",localOrigin:R="",newsletterId:K="",organization:J="",origin:G="",pandaApiUrl:q="",productId:Q=2,region:X="na,us",rootLayoutMQ:Y,rootStackFlowType:V,rootStackGap:ee,selected:et,showToggleLabel:en=!0,signInUrl:es,subscribeUrl:ei,textStackFlowType:ea,title:el,UnsubscribeRenderer:er,userAccess:eo,userSite:ec="",useUFCWidget:ed=!1,zIndex:eu})=>{let{addURL:ep,addLabel:eg,previewURL:eb,label:ew,description:eS,subOnly:ey,viewsDetailsURL:em}=n||{},eh=!!(ep&&eg),ek=eh?ep:em||eb,ev=getProductName(Q),ex=(0,j.wS)(ev,ew)[X],ej=ec===ev.toLowerCase()&&!!(null!=eo&&eo.fullAccess),ef=D&&!ej,eP=E[L],[ez,eB]=(0,i.useState)(!1),[e$,eT]=(0,i.useState)(!1),[eC,e_]=(0,i.useState)(!1),[eE,eI]=(0,i.useState)(!1),[eF,eM]=(0,i.useState)(""),[eN,eH]=(0,i.useState)(l),[eU,eZ]=(0,i.useState)(""),[eD,eA]=(0,i.useState)(null),{getTranslation:eO}=(0,h.$)(),eW=(0,i.useCallback)((t=null)=>{e&&eA(t)},[e,eA]),getErrorMessage=()=>ez?ez&&D?ex.errorUnsubscribing:ex.errorNewsletterNotLoggedIn:ex.errorSubscribing,toggleSubscription=async()=>{e_(!0);let e={[K]:!ez},t=ez?"remove_newsletter":"add_newsletter";try{if(y&&eT(!1),"Investor Business Daily"===J){let t=new FormData;t.append("email",eN),t.append(`${K}`,e[K]?1:0),await fetch(`${S}/api/newsletters/subscribe`,{method:"POST",body:t})}else await (0,a.Z)(`${R}/newsletters/svc/signup/${Q}`).options({credentials:"include",mode:"cors"}).accept("application/json").content("application/json").patch(JSON.stringify({email:eN,subscription:e})).res();T.includes(G)?setUtagEvent(t,ew,K,$?j.ys:j.QR):setUtagEvent(t,ew,K),e_(!1),eB(e=>!e),y||eT(!1),eW({message:f.X.DEFAULT_SUCCESS})}catch{let e=getErrorMessage();eM(ex.somethingWentWrong),eZ(e),e_(!1),eI(!0),eT(!1)}},toggleHandler=()=>ez?eT(e=>!e):D&&(!ez&&ef&&!ey||ej)?toggleSubscription():(eM(""),eI(!0));(0,i.useEffect)(()=>{if(void 0!==et&&l)eB(et);else{let getSubscriptionData=async()=>{try{let e=await (0,a.Z)(`${R}/newsletters/svc/signup/${Q}`).options({credentials:"include",mode:"cors"}).get().json(),{subscriptions:t,email:n}=e,s=null==t?void 0:t.find(e=>e.id===parseInt(K,10));eB(!!(null!=s&&s.opt_in)),n&&eH(n)}catch{eB(!1)}};D&&getSubscriptionData()}},[D,K,Q,R,l,et]);let eL=(0,i.useCallback)(()=>{eW()},[eW]),eR=(0,i.useMemo)(()=>({rootStackFlowType:V||(I?"vertical-center":"vertical-left"),textStackFlowType:ea||(I?"vertical-center":"vertical-left")}),[I,ea,V]),eK=null;A?eK="space080":O?eK="space040":eP.marginInlineEndOverride&&(eK=eP.marginInlineEndOverride);let eJ="";en&&(eJ=eO(ez?ex.subscribed:ex.subscribe));let eG="buttonOutlinedSecondary";A?eG="buttonMinimalPrimary":eP.buttonStylePre&&(eG=eP.buttonStylePre);let eq=J;return W&&"The Wall Street Journal"===J&&el&&(eq=`${J} - ${el}`),(0,P.jsxs)(N,{kind:L,zIndex:eu,rootLayoutMQ:Y,children:[(0,P.jsxs)(M,{flow:eR.rootStackFlowType,className:"root-stack",rootStackGap:ee,children:[(0,P.jsxs)(r.K,{flow:eR.textStackFlowType,className:"text-stack",children:[w&&(0,P.jsx)(d.a,{typographyPreset:"editorialLabel010",stylePreset:"uppercaseInkSubtle",marginBlockEnd:"space040",children:el||eO(ex.newsletterSignup)}),u&&(0,P.jsx)(d.a,{typographyPreset:"utilityLabel010",stylePreset:"inkBase",marginBlockEnd:"space030",children:eq||eO(ex.newsletterSignup)}),(0,P.jsx)(d.a,{as:I&&U,typographyPreset:eP.newsletterHeadingType||"editorialHeadline030",stylePreset:eP.newsletterHeadingStylePre||"inkContrast",children:ew}),(0,P.jsx)(d.a,{as:I&&U,typographyPreset:eP.descriptionFont||"utilityBody010",stylePreset:"inkBase",marginBlockStart:"space045",children:eS})]}),e$&&(er?(0,P.jsx)(er,{onSave:toggleSubscription,message:ex.areYouSureUnsubPrefix,name:ew,onCancel:()=>eT(!1)}):(0,P.jsx)(N,{marginBlockStart:"space050",paddingBlock:"space045",paddingInline:"space045",isUnsubscribe:!0,children:(0,P.jsxs)(r.K,{flow:"vertical-center",children:[(0,P.jsx)(d.a,{as:U,typographyPreset:"utilityBody010",stylePreset:"inkBase",children:ex.areYouSureUnsub}),(0,P.jsx)(N,{marginBlockStart:"space045",children:(0,P.jsxs)(r.K,{flow:null==eP?void 0:eP.unsubActionablesFlow,stackDistribution:"space-evenly",children:[(0,P.jsx)(c.z,{size:"small",overrides:{stylePreset:"buttonSolidPrimary",width:"100%"},onClick:toggleSubscription,children:ex.unsubscribe}),(0,P.jsx)(c.z,{size:"small",overrides:{stylePreset:"buttonOutlinedSecondary",width:"100%",[null==eP?void 0:eP.unsubButtonMarginType]:"space030"},onClick:()=>eT(!1),children:ex.cancel})]})})]})})),!e$&&(0,P.jsx)(N,{marginBlockStart:O?null:null==eP?void 0:eP.actionablesTopSpace,className:"actions",children:(0,P.jsxs)(F,{actionsGap:t,flow:"horizontal-center",stackDistribution:getActionablesDistribution(eC,A,!eb&&!em),className:"actions-wrapper",children:[eC&&(0,P.jsx)(p.X,{overrides:{size:"iconSize030"}}),!eC&&(0,P.jsxs)(P.Fragment,{children:[(eb||em)&&(0,P.jsx)(H,{size:"small",overrides:{marginInlineEnd:eK,minWidth:A?"space000":"sizing090",paddingInline:A?"space000":"space030",stylePreset:eG},onClick:()=>{window.utag&&(K?window.utag.link({event_name:"newsletter_preview",newsletter_id:K,newsletter_name:ew}):window.utag.link({event_name:"newsletter_preview",newsletter_name:ew})),window.open(ek.trim(),"_blank")},"aria-label":`${eh?eg.toUpperCase():em?ex.viewDetails:ex.preview} ${ew}`,children:eh?eg.toUpperCase():em?ex.viewDetails:ex.preview}),!eh&&(ed?C.includes(K)?(0,P.jsx)("ufc-newsletter",{product:W?"wsjp":_[Q],name:ew,"newsletter-id":K,variant:"onboarding",email:l,"panda-api":q,"ens-api":`${R}/newsletters/svc/signup/${Q}`,"ibd-api":`${S}/api/newsletters/subscribe`,"show-sign-up-text":"true","signin-url":es}):(0,P.jsx)(x.Z,{onToggle:toggleHandler,id:K,isWSJPlus:W,selected:ez}):(0,P.jsx)(Z,{label:eJ,size:A?"small":null==eP?void 0:eP.switchSize,checked:ez,onChange:toggleHandler,overrides:{label:{stylePreset:"inkContrast",typographyPreset:"utilityLabel010"},offIcon:o?B:null,onIcon:o?z:null,feedback:{size:null==eP?void 0:eP.feedbackSize}},"aria-label":`Subscribe to ${ew}`}))]})]})}),eD&&(0,P.jsx)(b.ZP,{actionType:b.Ox.CLOSE,autoClose:!0,onClose:eL,...eD,autoCloseTime:5e3})]}),(0,P.jsx)(g.u,{"aria-label":ex.somethingWentWrong,open:eE,header:(0,P.jsx)(ModalHeader,{title:eF,hasError:!!eU}),onDismiss:()=>eI(!1),children:(0,P.jsxs)(r.K,{flow:"vertical-center",children:[!ey&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(U,{stylePreset:"inkBase",marginBlockEnd:"space045",typographyPreset:"utilityBody010",children:eU}),D&&(0,P.jsx)(c.z,{size:"small",overrides:{stylePreset:"buttonSolidPrimary"},onClick:()=>eI(!1),children:ex.closeButton})]}),!D&&!ey&&!eU&&(0,P.jsx)(k.Z,{name:ew,labels:ex,editionId:s,newsletterId:K,productId:Q,setErrorMessage:eZ,setModalTitle:eM,localOrigin:R,setIsSubscribed:eB}),ey&&(0,P.jsx)(v.Z,{name:ew,labels:ex,productName:ev,signInUrl:es,subscribeUrl:ei})]})})]})}}}]);