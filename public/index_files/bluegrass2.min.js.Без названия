!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.BlueGrass2=n():e.BlueGrass2=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){e.exports=t(1)()},function(e,n,t){var r=t(2),o=t(11);e.exports=function(){return r({type:"BG2",library:"BlueGrass2",factory:o})}},function(e,n,t){var r=t(3),o=t(4),i=t(5);e.exports=function(e){var n,a=function(){throw new Error("BlueGrass2 client requires a global window and document object.  It is intended to run in the browser, not on the server.")};if(r.document){var s=null,c=e.library&&r[e.library];c&&!c.Bootstrapper||(s=c,c=e.factory(e)),n=c.Runtime?c:{type:e.type,Runtime:c,Utility:o},e.library&&(s&&s.Bootstrapper&&s.Bootstrapper.resolve(n),r[e.library]=n),e.legacy&&(!r.BlueGrass1&&r.BlueGrass&&"undefined"==typeof r.BlueGrass.type&&(r.BlueGrass1=r.BlueGrass),r.BlueGrass=n)}else n={type:e.type,Runtime:{openConnection:a,getConnection:a},Utility:o};return i(n),n.debug=function(){t(7).enable()},n}},function(e,n){e.exports="undefined"!=typeof window?window:{}},function(e,n){e.exports=function(){var e=(new Date).getTimezoneOffset()/60;return{arrayRemove:function(e,n,t){var r=e.slice((t||n)+1||e.length);return e.length=n<0?e.length+n:n,e.push.apply(e,r)},convertToExchangeTime:function(n,t){if(!n||null===n)return null;"undefined"!=typeof t?t+=e:t=0;var r=parseInt(n);isNaN(r)&&(n=n.indexOf("-")>=0||n.indexOf("+")>=0?n.substring(6,n.length-7):n.substring(6,n.length-2),r=parseInt(n)),r+=36e5*t;var o=new Date(r);return o},prettyDate:function(e,n){"object"!=typeof e&&(e=this.convertToExchangeTime(e,n));var t,r=[[60,"Just Now"],[90,"1 Minute"],[3600,"Minutes",60],[5400,"1 Hour"],[86400,"Hours",3600],[129600,"1 Day"],[604800,"Days",86400],[907200,"1 Week"],[2628e3,"Weeks",604800],[3942e3,"1 Month"],[31536e3,"Months",2628e3],[47304e3,"1 Year"],[31536e5,"Years",31536e3],[47304e5,"1 Century"]],o=new Date,i=(o-e)/1e3,a=" Ago",s=0;for(i<0&&(i=Math.abs(i),a="");t=r[s++];)if(i<t[0])return 2==t.length?t[1]+(s>1?a:""):Math.round(i/t[2])+" "+t[1]+(s>1?a:"");return i>47304e5?Math.round(i/47304e5)+" Centuries"+a:date_str}}}()},function(e,n,t){var r=t(6),o=t(7)("client");e.exports=function(e){return r({name:"Client",factory:e})}(function(e){function n(){var n=null,t={},r=!1;e.Runtime.getConnection(function(e,r){if(!n&&"connect"===r){n=e;for(var o in t)for(var i=t[o],a=0;a<i.handlers.length;a++)n.subscribe(o,i.handlers[a],i.options)}}),this.subscribe=function(e,a,u){if(r)return void o.warn("subscribe ignored because client is closed.");e in t||(t[e]={handlers:[]});for(var f=t[e],d=0;d<f.handlers.length;d++)if(f.handlers===a)return;0===f.handlers.length&&(f.options=u,i||s++),f.handlers.push(a),n&&n.subscribe(e,a,u),l(c.subscribe)},this.unsubscribe=function(e,a){if(r)return void o.warn("unsubscribe ignored because client is closed.");if(e in t){var c=t[e];if(a){for(var u=!1,l=0;l<c.handlers.length;l++)if(c.handlers[l]===a){c.handlers.splice(l,1),u=!0;break}if(!u)return;0!==c.handlers.length||i||s--,n&&n.unsubscribe(e,a)}else{var f=c.handlers;if(0===f.length)return;if(c.handlers=[],c.options=null,i||s--,n)for(var l=0;l<f.length;l++)n.unsubscribe(e,f[l])}}},this.close=function(){if(r)return void o.warn("close ignored because client is already closed.");if(r=!0,i||(a--,s-=t.length),n)for(var e in t)if(t.hasOwnProperty(e))for(var c=t[e],u=0;u<c.handlers.length;u++)n.unsubscribe(e,c.handlers[u]);t={},n=null}}var t=null,r=null,i=!1,a=0,s=0,c={now:"now",later:"later",latest:"latest",setup:"setup",create:"create",subscribe:"subscribe","default":"default"},u=function(){var e={};return e[c["default"]]=c.create,e[c.now]=c.setup,e[c.later]=c.create,e[c.latest]=c.subscribe,function(n){return e[n&&"string"==typeof n?n:c["default"]]||(c.hasOwnProperty(n)?n:e[c["default"]])}}(),l=function(n){if(!i&&t&&(r===n||r===c.create&&a>0||r===c.subscribe&&s>0)){i=!0,a=null,s=null;var o=t.endpoint;"string"==typeof o&&(o={to:o}),e.Runtime.openConnection(o)}};return{connect:c,setup:function(e){if(!e||"object"!=typeof e)throw new Error("Config is required and must be an object.");if("string"!=typeof e.endpoint&&("object"!=typeof e.endpoint||"string"!=typeof e.endpoint.to))throw new Error("A valid BlueGrass endpoint is required.");return i?void o.warn("setup ignored because a BG2 connection is already open."):(t&&o.warn("setup called more than once.  New configuration will replace the former."),t=e,r=u(e.connect),void l(c.setup))},create:function(){return i||(a++,l(c.create)),new n}}})},function(e,n,t){var r=t(3);e.exports=function(e){var n=function(n){return n&&(n[e.name]=n[e.name]||e.factory(n))};return n(r.BlueGrass),n(r.BlueGrass2),n(r.BlueGrass2Silent),n(r.BlueGrass2Legacy),n}},function(e,n,t){var r=t(8),o=t(10),i=t(9),a={enabled:o.hasSetting("debug")||o.hasKey("debugbg2"),enable:function(){s.enabled=!0,i.assign(s,i.filter(r,function(e,n){return s[n]===i.noop})),r.info("Debug mode enabled.")}},s=e.exports=function(e){var n=i.assign({},i.map(a,function(e,n){return s[n]}));return i.defaults(n,i.mapValues(s,function(n,t){return function(){var n=i.map(arguments);return"string"==typeof n[0]?n[0]="["+e+"] "+n[0]:n.unshift("["+e+"] "),s[t].apply(s,n)}})),n};i.assign(s,a),i.defaults(s,i.map(r,function(){return i.noop})),s.enabled&&s.enable()},function(e,n,t){function r(){return a.reduce(arguments,function(e,n){var t=i.console;return e||t&&"function"==typeof t[n]&&o(t,t[n])})||a.noop}function o(e,n){return function(){var t=a.map(arguments);"string"==typeof t[0]?t[0]=s+t[0]:t.unshift(s),n.apply(e,t)}}var i=t(3),a=t(9),s="BG2: ";e.exports={log:r("log","info"),info:r("info","log"),warn:r("warn","info","log"),error:r("error","warn","info","log")}},function(e,n){function t(e,n,t){var r=e[0];if(r){var o=e[1];s.isArray(o)||(o=s.map(e),o.shift()),s.reduce(o,function(e,t){return s.reduce(t,n,e,this)},r,t)}return r}function r(e){return e?function(n,t,r,o){e.apply(this,[t,r,o])}:s.noop}function o(e){return function(n,t,r,o){return n[r]=(e||s.identity).apply(this,[t,r,o]),n}}function i(e){return function(n,t,r,o){return n.hasOwnProperty(r)||(n[r]=(e||s.identity).apply(this,[t,r,o])),n}}function a(e){return!e||"length"in e?[]:{}}var s=e.exports={assign:function(e,n){return t(arguments,o())},defaults:function(e,n){return t(arguments,i())},forEach:function(e,n,t){return s.reduce(e,r(n),null,t),e},filter:function(e,n,t){var r=function(e,t,r,o){return(n||s.identity).apply(this,[t,r,o])&&(s.isArray(e)?e.push(t):e[r]=t),e};return s.reduce(e,r,a(e),t)},forOwn:function(e,n,t){return s.reduceOwn(collection,r(n),null,t),e},identity:function(e){return e},isArray:Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},map:function(e,n,t){return s.reduce(e,o(n),a(e),t)},mapValues:function(e,n,t){return s.reduceOwn(e,o(n),{},t)},noop:function(){},reduce:function(e,n,t,r){if(e)if("length"in e)for(var o=0;o<e.length;o++)t=(n||s.identity).apply(r,[t,e[o],o,e]);else t=s.reduceOwn(e,n,t,r);return t},reduceOwn:function(e,n,t,r){for(var o in e)e.hasOwnProperty(o)&&(t=(n||s.identity).apply(r,[t,e[o],o,e]));return t}}},function(e,n,t){function r(){var e=o.location&&o.location.href&&o.location.href.match(/\?(.+)$/i);if(e){var n=e[1].split("&"),t=i.filter(i.map(n,function(e){return e.match(/^([^\=]+)(?:\=(.*))?$/i)}));i.forEach(t,function(e){var n=e[1].toLowerCase(),t=e[2];"bg2"===n&&i.forEach(t&&t.split(","),function(e){s[e.toLowerCase()]=!0}),"undefined"==typeof t&&(t=!0),a[n]=t})}}var o=t(3),i=t(9),a={},s={};r(),e.exports={hasKey:function(e){return a.hasOwnProperty(e.toLowerCase())},hasSetting:function(e){return!!s[e.toLowerCase()]}}},function(e,n,t){var r=t(12);"undefined"!=typeof window&&t(18);var o=t(8),i=t(7)("runtime"),a=t(9);e.exports=function(){!r.signalR||r.support.cors||r.signalR.prototype.__start||(r.signalR.prototype.__start=r.signalR.prototype.start,r.signalR.prototype.start=function(){var e,n=r.support.cors;try{r.support.cors=!0,e=r.signalR.prototype.__start.apply(this,arguments)}finally{r.support.cors=n}return e}),r.signalR.prototype.__stop||(r.signalR.prototype.__stop=r.signalR.prototype.stop,r.signalR.prototype.stop=function(e,n){return r.signalR.prototype.__stop.apply(this,[!0,n])});var e={h:{a:"process",t:"/system/resubscribe"},b:{resubscribe:!0}},n={h:{a:"heartbeat"},b:{}},t=function(e,n){return"string"==typeof e&&0!==e.length&&"/"===e.charAt(0)||(o.error(n+" called with invalid channel name: %o",e),!1)},s=function(e,n,t,r){return r&&!e?(o.error(t+" called without a "+n+", which is required."),!1):!e||"function"==typeof e||(o.error(t+" called with invalid "+n+", which must be a function: %o",e),!1)},c=function(e,n,i){var c,f=n,d=Array.isArray(i)?i:[i],p={},g=null,h=null,v=this,m=function(e){if(!r)throw new Error("BlueGrass2 requires a shimmed version of jQuery. signalr-no-jquery was not found.");if(!r.signalR)throw new Error("BlueGrass2 requires Microsoft SignalR client, which is a jQuery plug-in.");e()},b=function(e,n){d&&(d.forEach(function(t){try{t(e,n)}catch(r){o.warn("Error in connection callback: "+r.message)}}),d=null)},y=function(e,n){"unsubscribe"==e.h.a&&null!=p[n.getChannelName()]&&delete p[n.getChannelName()],g.send(e)},S=function(e){"process"===e.h.a&&e.b?e.b.resubscribe?w():e.b.channelState&&_(e.b.channelState):"inform"===e.h.a&&"/system/channelinfo"===e.h.t&&T(e.b),h&&h(e)},w=function(){Object.keys(p).forEach(function(e){p[e].lowLevelSubscribe()})},T=function(e){e&&e.channelName&&Object.keys(p).forEach(function(n){p[n].getChannelName()==e.channelName&&e.deliveryType&&p[n].setDeliveryType(e.deliveryType)})},_=function(e){var n=p[e.channelName];null!=n&&(e.enabled||n.resetState())},k=function(){C();var e=function(){b(v,"connect")};g=new u(e,S),g.initialize(f,R)},C=function(){g&&(g.terminate(),g=null)},R=function(e,n){if(e!==g)return void e.terminate();if(n){var t=p[n.h.t];t&&t.deliver(n)}};this.subscribe=function(e,n,r){if(!t(e,"subscribe")||!s(n,"callback","subscribe",!0))return null;c=r;var o=p[e];return o?o.addCallback(n):(o=new l(e,n,r,y),p[e]=o),o},this.unsubscribe=function(e,n,r){if(!t(e,"unsubscribe")||!s(n,"callback","unsubscribe",!1))return null;var o=p[e];return o&&(n?o.removeCallback(n):o.unsubscribe()),o},this.getChannel=function(e){return t(e,"getChannel")?p[e]:null},this.close=function(){d=null,p={},C()},this.reconnect=function(){},this.isOpen=function(){return!!g&&g.isOpen()},this.isDisabled=function(){return!!g&&g.isDisabled()},this.addCallback=function(e){s(e,"callback","addCallback",!0)&&d&&d.push(e)},this.setTransmitHook=function(e){s(e,"hook","setTransmitHook",!1)&&g&&g.setTransmitHook(e)},this.setReceiveHook=function(e){s(e,"hook","setReceiveHook",!1)&&g&&g.setReceiveHook(e)},this.setSystemHook=function(e){s(e,"hook","setSystemHook",!1)&&(h=e)},this.scrambleClientId=function(){g&&g.scrambleClientId()},this.getChannelCount=function(){return a.reduceOwn(p,function(e){return e+1},0)},this.lowLevelSend=function(e){return e&&"object"==typeof e?void(g&&g.send(e)):void o.error("lowLevelSend called with invalid message: %o",e)},m(k)},u=function(){return function(t,a){var s,c,u,l,f,d,p,g,h,v,m=[],b=8e3,y=6e4,S=b,w=1e3,T=3e4,_=w,k=0,C=0,R=!1,E=!1,x=!1,A=!1,j=!1,I=null,H=3e4,P=2e3,D=t,O=a,F=this,M=function(){if(!A&&!d){var e=S;S=Math.max(Math.min(e*e,y),b),d=setTimeout(function(){d=null,A||h.start().fail(function(){M()})},e)}},N=function(){if(!A&&!g){var e=_;_=Math.max(Math.min(e*e,T),w),g=setTimeout(function(){g=null,A||r.ajax({method:"POST",url:c.to+"/api/v1/reset",complete:function(e,n){"success"===n||"error"===n&&(0===e.status||404===e.status)?(S=0,j=!1,M()):N()}})},e)}},q=function(e){if(!A&&!d){j=!0;var n=e||0;d=setTimeout(function(){d=null,A||(E?h.stop():(_=0,N()))},n)}},L=function(){0!==m.length&&m[0]===n||m.unshift(n)},W=function(e){e.newState==r.signalR.connectionState.connected?(E||(E=!0,S=b,z(),R||(R=!0,"function"==typeof D&&D())),L(),V()):(f&&clearTimeout(f),I&&clearTimeout(I),p&&clearTimeout(p),e.newState==r.signalR.connectionState.disconnected&&E&&(E=!1,A||(j?d||(_=0,N()):M()))),O({h:{a:"inform",t:"/system/signalrstatechanged"},b:e})},U=function(e){var n=JSON.parse(e);null!=l&&l(n),n.h&&n.h.t&&0===n.h.t.indexOf("/system/")&&O(n),s(F,n)},G=function(e,n){var t={h:{a:"inform",t:"/system/channelinfo"},b:{channelName:e,deliveryType:n}};O(t)},B=function(e){e!==H&&e>=P&&(H=e,p&&(clearTimeout(p),p=setTimeout(K,e)))},z=function(){O(e)},Q=function(e){q(e)},K=function(){p=setTimeout(K,H),J(n)},V=function(){if(E&&(I=null,!(C>=2))){if(0===m.length)return void(p||(p=setTimeout(K,H)));var e=m.shift();if(k>0)f=setTimeout(function(){J(e)},1e3*Math.min(900,Math.pow(2,k)));else{clearTimeout(f),J(e);var n=m.length>0?100:H;I=setTimeout(V,n)}}},J=function(e){if(E){var n=function(n){C++,n.done(function(e,n){X(n)}).fail(function(){$(e)})};null!=u&&u(e),e.h&&("heartbeat"===e.h.a?n(v.invoke("ping")):"subscribe"===e.h.a?n(e.b.securityToken?v.invoke("subscribe",e.h.t,e.b.sequence,e.b.number,e.b.securityToken):v.invoke("subscribe",e.h.t,e.b.sequence,e.b.number)):"unsubscribe"===e.h.a?n(v.invoke("unsubscribe",e.h.t)):"fetch"===e.h.a&&n(v.invoke("fetch",e.h.t,e.b.sequence,e.b.ranges)))}},X=function(e){C--,k=0,p&&(clearTimeout(p),p=null),V()},$=function(e){C--,k++,p||(p=setTimeout(K,H)),m.push(e),V()};this.initialize=function(e,n){c=e,s=n,h=r.hubConnection(e.to),i.enabled&&(h.logging=!0),v=h.createHubProxy("mainHub"),v.on("newMessage",U),v.on("setDeliveryType",G),v.on("setHeartbeatInterval",B),v.on("resubscribe",z),v.on("reconnect",Q),h.stateChanged(W),h.start().fail(function(){o.error("Failed to connect to BlueGrass2 SignalR endpoint: "+e.to+".  Will retry..."),M()})},this.terminate=function(){A||(A=!0,f&&clearTimeout(f),d&&clearTimeout(d),g&&clearTimeout(g),h&&(h.stop(),h=null,v=null))},this.setPickupInterval=function(e){},this.scrambleClientId=function(){},this.setTransmitHook=function(e){u=e},this.setReceiveHook=function(e){l=e},this.send=function(e){E&&(m.push(e),null==I&&(I=setTimeout(V,100)))},this.isOpen=function(){return E},this.isDisabled=function(){return x}}}(),l=function(e,n,t,r){var i=e,c=[],u="",l="0",f=r;c.push(n);var d=function(e){a.forEach(c,function(n){try{n(e)}catch(t){o.warn('Error delivering message %o on "%s": %o',e,i,t)}})},p="Lossy";t&&t.sequence&&(u=t.sequence),t&&t.number&&(l=t.number);var g=l,h=null,v=0,m=[],b=null,y=null;t&&t.securityToken&&(y=t.securityToken);var S=this,w=function(){if(m&&m.length>0){m.sort(function(e,n){return e.h.n-n.h.n});for(var e=0,n=0;n<m.length&&m[n].h.n==g+1;n++)d(m[n]),g=m[n].h.n,e=n+1;m=m.length>e?m.slice(e):[],m.length>0?b=setTimeout(function(){w()},1e3):(clearTimeout(h),b=null,v=0,m=[])}},T=function(){u="",m=[],clearTimeout(h),v=0},_=function(){if(v>=10)return void T();var e=[];if(m.length>0){m.sort(function(e,n){return e.h.n-n.h.n});for(var n=g,t=0;t<m.length;t++){var r=m[t].h.n;if(r>n+1){var o=n+1;r==o+1?e.push([o]):e.push([o,r-1])}n=r}}if("function"==typeof f){var a={h:{t:i,a:"fetch"},b:{sequence:u,ranges:e}};f(a,S)}v++,h=setTimeout(function(){_()},1e3*Math.min(32,Math.pow(2,v)))};this.getChannelName=function(){return i},this.getDeliveryType=function(){return p},this.setDeliveryType=function(e){p=e},this.getCallbacks=function(){return c},this.clearTimers=function(){h&&clearTimeout(h),b&&clearTimeout(b)},this.lowLevelSubscribe=function(){if("function"==typeof f){var e={h:{t:i,a:"subscribe"},b:{sequence:u,number:g}};y&&(e.b.securityToken=y),f(e,this)}},this.unsubscribe=function(){if("function"==typeof f){var e={h:{t:i,a:"unsubscribe"}};f(e,this)}},this.deliver=function(e){if(d&&e&&e.h&&e.h.t==i)if("retransmit"==e.h.a){for(var n=!1,t=0;t<m.length;t++)if(m[t].h.n==e.h.n){n=!0;break}n||m.push(e),b||(b=setTimeout(function(){w()},1e3))}else if("broadcast"==e.h.a){var r=!1;if(e.h.s!=u&&(u=e.h.s,l=e.h.n,g=e.h.n,m=[],clearTimeout(h),v=0,"Lossy"==p&&(r=!0)),"Lossy"==p&&e.h.n>g||"BestEffort"==p)r=!0;else if("Guaranteed"==p){if(e.h.n<=g&&e.h.n!=l)return;if(g+1==e.h.n||e.h.n==l||e.h.n>=g+50)r=!0;else{var o=m.push(e);1==o?h=setTimeout(function(){_()},1e3):o>=50&&(this.resetState(),this.deliver(e))}}r&&(g=e.h.n,d(e,i))}},this.resetState=function(){T()},this.addCallback=function(e){s(e,"callback","addCallback",!0)&&c.indexOf(e)==-1&&c.push(e)},this.removeCallback=function(e){s(e,"callback","removeCallback",!0)&&(1==c.length&&c[0]==e&&this.unsubscribe(),c=a.filter(c,function(n){return n!==e}))},this.getLastMessageNumber=function(){return g},this.getSequence=function(){return u},this.getToken=function(){return y},this.lowLevelSubscribe()},f=null,d=!1,p=[];p.push(function(){d=!1});var g={openConnection:function(e,n){if(e&&e.to)(d||f)&&i.warn("openConnection has already been called.  The endpoint given will be ignored.  Consider using getConnection(callback) instead.");else{var t="Calling openConnection without an endpoint is deprecated.  Consider using getConnection(callback) instead.";d||f||(t+="  Since this is the first call to openConnection, the endpoint will default to MarketWatch production."),i.warn(t)}e||(e={}),e.to||(e.to="http://mwstream.wsj.net/bg2"),f?n&&(d?f.addCallback(n):n(f,"connect")):(d=!0,n&&p.push(n),f=new c(this,e,p),p=null)},getConnection:function(e){return"function"!=typeof e?(f?d&&i.warn("getConnection called after openConnection, but before the connection was successfully opened.  The returned connection may not function as expected.  Consider using getConnection with a callback instead."):i.warn("getConnection called before openConnection; null will be returned.  Consider using getConnection with a callback instead."),f):(f?d?f.addCallback(e):e(f,"connect"):p.push(e),f)}};return g}},function(e,n,t){"use strict";var r=t(13),o=t(17),i=function(e){var n=e.events||{};return e&&e===e.window?{0:e,load:function(n){return e.addEventListener("load",n,!1)},bind:function(n,t){return e.addEventListener(n,t,!1)},unbind:function(n,t){return e.removeEventListener(n,t,!1)}}:{0:e,unbind:function(t,r){var o=n[t]||[];if(r){var i=o.indexOf(r);i!==-1&&o.splice(i,1)}else o=[];n[t]=o,e.events=n},bind:function(t,r){var o=n[t]||[];n[t]=o.concat(r),e.events=n},triggerHandler:function(e,t){var r=this,o=n[e]||[];o.forEach(function(n){t=t&&t[0]&&void 0===t[0].type?[{type:e}].concat(t||[]):t||[],n.apply(r,t)})}}},a=function(){try{return new window.XMLHttpRequest}catch(e){}},s=function(e){var n=a();e.xhrFields&&e.xhrFields.withCredentials&&(n.withCredentials=!0),n.onreadystatechange=function(){if(4===n.readyState)if(200!==n.status||n._hasError)e.error&&e.error(n);else try{e.success&&e.success(JSON.parse(n.responseText))}catch(t){e.error&&e.error(n)}},n.withCredentials=e.xhrFields.withCredentials;var t="_="+(new Date).getTime();return e.url.indexOf("?")===-1?e.url+="?"+t:e.url.indexOf("_=")===-1?e.url+="&"+t:e.url=e.url.replace(/_=\d+/,t),n.open(e.type,e.url),n.setRequestHeader("content-type",e.contentType),e.headers&&Object.keys(e.headers).forEach(function(t){var r=e.headers[t];n.setRequestHeader(t,r)}),n.send(e.data.data&&"data="+encodeURIComponent(e.data.data)),{abort:function(e){return n.abort(e)}}};e.exports=r.extend(i,r,{defaultAjaxHeaders:null,ajax:s,inArray:function(e,n){return e.indexOf(n)!==-1},trim:function(e){return e&&e.trim()},isEmptyObject:function(e){return!e||0===Object.keys(e).length},makeArray:function(e){return[].slice.call(e,0)},param:function(e){return o(e)},support:{cors:function(){var e=a();return!!e&&"withCredentials"in e}()}})},function(e,n,t){e.exports=t(14)},function(e,n,t){var r=e.exports=t(15),o=Array.prototype.slice;r.extend({Deferred:function(e){var n=[["resolve","done",r.Callbacks("once memory"),"resolved"],["reject","fail",r.Callbacks("once memory"),"rejected"],["notify","progress",r.Callbacks("memory")]],t="pending",o={state:function(){return t},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return r.Deferred(function(t){r.each(n,function(n,o){var a=o[0],s=e[n];i[o[1]](r.isFunction(s)?function(){var e=s.apply(this,arguments);e&&r.isFunction(e.promise)?e.promise().done(t.resolve).fail(t.reject).progress(t.notify):t[a+"With"](this===i?t:this,[e])}:t[a])}),e=null}).promise()},promise:function(e){return null!=e?r.extend(e,o):o}},i={};return o.pipe=o.then,r.each(n,function(e,r){var a=r[2],s=r[3];o[r[1]]=a.add,s&&a.add(function(){t=s},n[1^e][2].disable,n[2][2].lock),i[r[0]]=a.fire,i[r[0]+"With"]=a.fireWith}),o.promise(i),e&&e.call(i,i),i},when:function(e){var n,t,i,a=0,s=o.call(arguments),c=s.length,u=1!==c||e&&r.isFunction(e.promise)?c:0,l=1===u?e:r.Deferred(),f=function(e,t,r){return function(i){t[e]=this,r[e]=arguments.length>1?o.call(arguments):i,r===n?l.notifyWith(t,r):--u||l.resolveWith(t,r)}};if(c>1)for(n=new Array(c),t=new Array(c),i=new Array(c);a<c;a++)s[a]&&r.isFunction(s[a].promise)?s[a].promise().done(f(a,i,s)).fail(l.reject).progress(f(a,t,n)):--u;return u||l.resolveWith(i,s),l.promise()}})},function(e,n,t){function r(e){var n=a[e]={};return o.each(e.split(i),function(e,t){n[t]=!0}),n}var o=e.exports=t(16),i=/\s+/,a={};o.Callbacks=function(e){e="string"==typeof e?a[e]||r(e):o.extend({},e);var n,t,i,s,c,u,l=[],f=!e.once&&[],d=function(r){for(n=e.memory&&r,t=!0,u=s||0,s=0,c=l.length,i=!0;l&&u<c;u++)if(l[u].apply(r[0],r[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,l&&(f?f.length&&d(f.shift()):n?l=[]:p.disable())},p={add:function(){if(l){var t=l.length;!function r(n){o.each(n,function(n,t){var i=o.type(t);"function"===i?e.unique&&p.has(t)||l.push(t):t&&t.length&&"string"!==i&&r(t)})}(arguments),i?c=l.length:n&&(s=t,d(n))}return this},remove:function(){return l&&o.each(arguments,function(e,n){for(var t;(t=o.inArray(n,l,t))>-1;)l.splice(t,1),i&&(t<=c&&c--,t<=u&&u--)}),this},has:function(e){return o.inArray(e,l)>-1},empty:function(){return l=[],this},disable:function(){return l=f=n=void 0,this},disabled:function(){return!l},lock:function(){return f=void 0,n||p.disable(),this},locked:function(){return!f},fireWith:function(e,n){return n=n||[],n=[e,n.slice?n.slice():n],!l||t&&!f||(i?f.push(n):d(n)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!t}};return p}},function(e,n){function t(e){return null==e?String(e):l[u.call(e)]||"object"}function r(e){return"function"===c.type(e)}function o(e){return"array"===c.type(e)}function i(e,n,t){var o,i=0,a=e.length,s=void 0===a||r(e);if(t)if(s){for(o in e)if(n.apply(e[o],t)===!1)break}else for(;i<a&&n.apply(e[i++],t)!==!1;);else if(s){for(o in e)if(n.call(e[o],o,e[o])===!1)break}else for(;i<a&&n.call(e[i],i,e[i++])!==!1;);return e}function a(e){return!(!e||"object"!==c.type(e))}function s(){var e,n,t,r,o,i,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[1]||{},s=2),"object"==typeof a||c.isFunction(a)||(a={}),u===s&&(a=this,--s);s<u;s++)if(null!=(e=arguments[s]))for(n in e)t=a[n],r=e[n],a!==r&&(l&&r&&(c.isPlainObject(r)||(o=c.isArray(r)))?(o?(o=!1,i=t&&c.isArray(t)?t:[]):i=t&&c.isPlainObject(t)?t:{},a[n]=c.extend(l,i,r)):void 0!==r&&(a[n]=r));return a}var c=e.exports={type:t,isArray:o,isFunction:r,isPlainObject:a,each:i,extend:s,noop:function(){}},u=Object.prototype.toString,l={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(e){l["[object "+e+"]"]=e.toLowerCase()})},function(e,n,t){var r,o;!function(t){"use strict";var i=function(e){var n=[],t=/\[\]$/,r=function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=function(e,t){t="function"==typeof t?t():null===t?"":void 0===t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)},i=function(e,a){var s,c,u;if(e)if(r(a))for(s=0,c=a.length;s<c;s++)t.test(e)?o(e,a[s]):i(e+"["+("object"==typeof a[s]?s:"")+"]",a[s]);else if(a&&"[object Object]"===String(a))for(u in a)i(e+"["+u+"]",a[u]);else o(e,a);else if(r(a))for(s=0,c=a.length;s<c;s++)o(a[s].name,a[s].value);else for(u in a)i(u,a[u]);return n};return i("",e).join("&").replace(/%20/g,"+")};"object"==typeof e&&"object"==typeof e.exports?e.exports=i:(r=[],o=function(){return i}.apply(n,r),!(void 0!==o&&(e.exports=o)))}(this)},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=t(12);!function(e,n,t){function r(n,t){if(e.isArray(n)){for(var r=n.length-1;r>=0;r--){var o=n[r];"string"===e.type(o)&&c.transports[o]||(t.log("Invalid transport: "+o+", removing it from the transports list."),n.splice(r,1))}0===n.length&&(t.log("No transports remain within the specified transport array."),n=null)}else if(c.transports[n]||"auto"===n){if("auto"===n&&c._.ieVersion<=8)return["longPolling"]}else t.log("Invalid transport: "+n.toString()+"."),n=null;return n}function o(e){return"http:"===e?80:"https:"===e?443:void 0}function i(e,n){return n.match(/:\d+$/)?n:n+":"+o(e)}function a(n,t){var r=this,o=[];r.tryBuffer=function(t){return n.state===e.signalR.connectionState.connecting&&(o.push(t),!0)},r.drain=function(){if(n.state===e.signalR.connectionState.connected)for(;o.length>0;)t(o.shift())},r.clear=function(){o=[]}}var s={nojQuery:"jQuery was not found. Please ensure jQuery is referenced before the SignalR client JavaScript file.",noTransportOnInit:"No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.",errorOnNegotiate:"Error during negotiation request.",stoppedWhileLoading:"The connection was stopped during page load.",stoppedWhileNegotiating:"The connection was stopped during the negotiate request.",errorParsingNegotiateResponse:"Error parsing negotiate response.",errorRedirectionExceedsLimit:"Negotiate redirection limit exceeded.",errorDuringStartRequest:"Error during start request. Stopping the connection.",errorFromServer:"Error message received from the server: '{0}'.",stoppedDuringStartRequest:"The connection was stopped during the start request.",errorParsingStartResponse:"Error parsing start response: '{0}'. Stopping the connection.",invalidStartResponse:"Invalid start response: '{0}'. Stopping the connection.",protocolIncompatible:"You are using a version of the client that isn't compatible with the server. Client version {0}, server version {1}.",aspnetCoreSignalrServer:"Detected a connection attempt to an ASP.NET Core SignalR Server. This client only supports connecting to an ASP.NET SignalR Server. See https://aka.ms/signalr-core-differences for details.",sendFailed:"Send failed.",parseFailed:"Failed at parsing response: {0}",longPollFailed:"Long polling request failed.",eventSourceFailedToConnect:"EventSource failed to connect.",eventSourceError:"Error raised by EventSource",webSocketClosed:"WebSocket closed.",pingServerFailedInvalidResponse:"Invalid ping response when pinging server: '{0}'.",pingServerFailed:"Failed to ping server.",pingServerFailedStatusCode:"Failed to ping server.  Server responded with status code {0}, stopping the connection.",pingServerFailedParse:"Failed to parse ping server response, stopping the connection.",noConnectionTransport:"Connection is in an invalid state, there is no transport active.",webSocketsInvalidState:"The Web Socket transport is in an invalid state, transitioning into reconnecting.",reconnectTimeout:"Couldn't reconnect within the configured timeout of {0} ms, disconnecting.",reconnectWindowTimeout:"The client has been inactive since {0} and it has exceeded the inactivity timeout of {1} ms. Stopping the connection.",jsonpNotSupportedWithAccessToken:"The JSONP protocol does not support connections that require a Bearer token to connect, such as the Azure SignalR Service."};if("function"!=typeof e)throw new Error(s.nojQuery);var c,u,l="complete"===n.document.readyState,f=e(n),d="__Negotiate Aborted__",p={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},g={processData:!0,timeout:null,async:!0,global:!1,cache:!1},h=function(e,t){if(t!==!1){var r;"undefined"!=typeof n.console&&(r="["+(new Date).toTimeString()+"] SignalR: "+e,n.console.debug?n.console.debug(r):n.console.log&&n.console.log(r))}},v=function(n,t,r){return t===n.state&&(n.state=r,e(n).triggerHandler(p.onStateChanged,[{oldState:t,newState:r}]),!0)},m=function(e){return e.state===c.connectionState.disconnected},b=function(e){return e._.keepAliveData.activated&&e.transport.supportsKeepAlive(e)},y=function(t){var r,o;t._.configuredStopReconnectingTimeout||(o=function(n){var t=c._.format(c.resources.reconnectTimeout,n.disconnectTimeout);n.log(t),e(n).triggerHandler(p.onError,[c._.error(t,"TimeoutException")]),n.stop(!1,!1)},t.reconnecting(function(){var e=this;e.state===c.connectionState.reconnecting&&(r=n.setTimeout(function(){o(e)},e.disconnectTimeout))}),t.stateChanged(function(e){e.oldState===c.connectionState.reconnecting&&n.clearTimeout(r)}),t._.configuredStopReconnectingTimeout=!0)};c=function(e,n,t){return new c.fn.init(e,n,t)},c._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:function(){var e,t;return"Microsoft Internet Explorer"===n.navigator.appName&&(t=/MSIE ([0-9]+\.[0-9]+)/.exec(n.navigator.userAgent),t&&(e=n.parseFloat(t[1]))),e}(),error:function(e,n,t){var r=new Error(e);return r.source=n,"undefined"!=typeof t&&(r.context=t),r},transportError:function(e,n,r,o){var i=this.error(e,r,o);return i.transport=n?n.name:t,i},format:function(){for(var e=arguments[0],n=0;n<arguments.length-1;n++)e=e.replace("{"+n+"}",arguments[n+1]);return e},firefoxMajorVersion:function(e){var n=e.match(/Firefox\/(\d+)/);return!n||!n.length||n.length<2?0:parseInt(n[1],10)},configurePingInterval:function(t){var r=t._.config,o=function(n){e(t).triggerHandler(p.onError,[n])};r&&!t._.pingIntervalId&&r.pingInterval&&(t._.pingIntervalId=n.setInterval(function(){c.transports._logic.pingServer(t).fail(o)},r.pingInterval))}},c.events=p,c.resources=s,c.ajaxDefaults=g,c.changeState=v,c.isDisconnecting=m,c.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4},c.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/js'></script>.")}},"function"==typeof f.on?f.on("load",function(){l=!0}):f.load(function(){l=!0}),c.fn=c.prototype={init:function(n,t,r){var o=e(this);this.url=n,this.qs=t,this.lastError=null,this._={keepAliveData:{},connectingMessageBuffer:new a(this,function(e){o.triggerHandler(p.onReceived,[e])}),lastMessageAt:(new Date).getTime(),lastActiveAt:(new Date).getTime(),beatInterval:5e3,beatHandle:null,totalTransportConnectTimeout:0,redirectQs:null},"boolean"==typeof r&&(this.logging=r)},_parseResponse:function(e){var n=this;return e&&"string"==typeof e?n.json.parse(e):e},_originalJson:n.JSON,json:n.JSON,isCrossDomain:function(t,r){var o;return t=e.trim(t),r=r||n.location,0===t.indexOf("http")&&(o=n.document.createElement("a"),o.href=t,o.protocol+i(o.protocol,o.host)!==r.protocol+i(r.protocol,r.host))},ajaxDataType:"text",contentType:"application/json; charset=UTF-8",logging:!1,state:c.connectionState.disconnected,clientProtocol:"2.1",supportedProtocols:["1.5","2.0","2.1"],negotiateRedirectSupportedProtocols:["2.0","2.1"],reconnectDelay:2e3,transportConnectTimeout:0,disconnectTimeout:3e4,reconnectWindow:3e4,keepAliveWarnAt:2/3,start:function(t,o){var i,a=this,u={pingInterval:3e5,waitForPageLoad:!0,transport:"auto",jsonp:!1},g=a._deferral||e.Deferred(),h=n.document.createElement("a"),m=function(t,r){t.url===r&&t.baseUrl||(t.url=r,h.href=t.url,h.protocol&&":"!==h.protocol?(t.protocol=h.protocol,t.host=h.host):(t.protocol=n.document.location.protocol,t.host=h.host||n.document.location.host),t.baseUrl=t.protocol+"//"+t.host,
t.wsProtocol="https:"===t.protocol?"wss://":"ws://",0===t.url.indexOf("//")&&(t.url=n.location.protocol+t.url,t.log("Protocol relative URL detected, normalizing it to '"+t.url+"'.")),t.isCrossDomain(t.url)&&(t.log("Auto detected cross domain url."),"auto"===u.transport&&(u.transport=["webSockets","serverSentEvents","longPolling"]),"undefined"==typeof t.withCredentials&&(t.withCredentials=!0),e.support.cors||(t.ajaxDataType="jsonp",t.log("Using jsonp because this browser doesn't support CORS.")),t.contentType=c._.defaultContentType))};if(a.lastError=null,a._deferral=g,!a.json)throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");if("function"===e.type(t)?o=t:"object"===e.type(t)&&(e.extend(u,t),"function"===e.type(u.callback)&&(o=u.callback)),u.transport=r(u.transport,a),!u.transport)throw new Error("SignalR: Invalid transport(s) specified, aborting start.");if(a._.config=u,!l&&u.waitForPageLoad===!0)return a._.deferredStartHandler=function(){a.start(t,o)},f.bind("load",a._.deferredStartHandler),g.promise();if(a.state===c.connectionState.connecting)return g.promise();if(v(a,c.connectionState.disconnected,c.connectionState.connecting)===!1)return g.resolve(a),g.promise();y(a),"auto"===u.transport&&u.jsonp===!0&&(u.transport="longPolling"),a.withCredentials=u.withCredentials,a._originalUrl=a.url,a.ajaxDataType=u.jsonp?"jsonp":"text",m(a,a.url),e(a).bind(p.onStart,function(n,t){"function"===e.type(o)&&o.call(a),g.resolve(a)}),a._.initHandler=c.transports._logic.initHandler(a),i=function(t,r){var o=c._.error(s.noTransportOnInit);if(r=r||0,r>=t.length)return 0===r?a.log("No transports supported by the server were selected."):1===r?a.log("No fallback transports were selected."):a.log("Fallback transports exhausted."),e(a).triggerHandler(p.onError,[o]),g.reject(o),void a.stop();if(a.state!==c.connectionState.disconnected){var u=t[r],l=c.transports[u],d=function(){i(t,r+1)};a.transport=l;try{a._.initHandler.start(l,function(){var t=c._.firefoxMajorVersion(n.navigator.userAgent)>=11,r=!0;a.log("The start request succeeded. Transitioning to the connected state."),b(a)&&c.transports._logic.monitorKeepAlive(a),c.transports._logic.startHeartbeat(a),c._.configurePingInterval(a),v(a,c.connectionState.connecting,c.connectionState.connected)||a.log("WARNING! The connection was not in the connecting state."),a._.connectingMessageBuffer.drain(),e(a).triggerHandler(p.onStart),f.bind("unload",function(){a.log("Window unloading, stopping the connection."),a.stop(r)}),t&&f.bind("beforeunload",function(){n.setTimeout(function(){a.stop(r)},0)})},d)}catch(h){a.log(l.name+" transport threw '"+h.message+"' when attempting to start."),d()}}};var S=a.url+"/negotiate",w=function(n,t){var r=c._.error(s.errorOnNegotiate,n,t._.negotiateRequest);e(t).triggerHandler(p.onError,r),g.reject(r),t.stop()};return e(a).triggerHandler(p.onStarting),S=c.transports._logic.prepareQueryString(a,S),a.log("Negotiating with '"+S+"'."),a._.negotiateRequest=function(){var n,t,r,o=0,l=100,f=[],h=[],v=function(e,n){var t=c.transports._logic.prepareQueryString(e,e.url+"/negotiate");e.log("Negotiating with '"+t+"'.");var r={url:t,error:function(n,t){t!==d?w(n,e):g.reject(c._.error(s.stoppedWhileNegotiating,null,e._.negotiateRequest))},success:n};return e.accessToken&&(r.headers={Authorization:"Bearer "+e.accessToken}),c.transports._logic.ajax(e,r)},b=function y(d){try{n=a._parseResponse(d)}catch(b){return void w(c._.error(s.errorParsingNegotiateResponse,b),a)}if(n.availableTransports)return r=c._.error(s.aspnetCoreSignalrServer),e(a).triggerHandler(p.onError,[r]),void g.reject(r);if(!n.ProtocolVersion||a.supportedProtocols.indexOf(n.ProtocolVersion)===-1)return r=c._.error(c._.format(s.protocolIncompatible,a.clientProtocol,n.ProtocolVersion)),e(a).triggerHandler(p.onError,[r]),void g.reject(r);if(a.negotiateRedirectSupportedProtocols.indexOf(n.ProtocolVersion)!==-1){if(n.Error)return r=c._.error(c._.format(s.errorFromServer,n.Error)),e(a).triggerHandler(p.onError,[r]),void g.reject(r);if(n.RedirectUrl){if(o===l)return void w(c._.error(s.errorRedirectionExceedsLimit),a);"auto"===u.transport&&(u.transport=["webSockets","serverSentEvents","longPolling"]),a.log("Received redirect to: "+n.RedirectUrl),a.accessToken=n.AccessToken;var S=n.RedirectUrl.split("?",2);return m(a,S[0]),a._.redirectQs=2===S.length?S[1]:null,"jsonp"===a.ajaxDataType&&a.accessToken?void w(c._.error(s.jsonpNotSupportedWithAccessToken),a):(o++,void v(a,y))}}t=a._.keepAliveData,a.appRelativeUrl=n.Url,a.id=n.ConnectionId,a.token=n.ConnectionToken,a.webSocketServerUrl=n.WebSocketServerUrl,a._.pollTimeout=1e3*n.ConnectionTimeout+1e4,a.disconnectTimeout=1e3*n.DisconnectTimeout,a._.totalTransportConnectTimeout=a.transportConnectTimeout+1e3*n.TransportConnectTimeout,n.KeepAliveTimeout?(t.activated=!0,t.timeout=1e3*n.KeepAliveTimeout,t.timeoutWarning=t.timeout*a.keepAliveWarnAt,a._.beatInterval=(t.timeout-t.timeoutWarning)/3):t.activated=!1,a.reconnectWindow=a.disconnectTimeout+(t.timeout||0),e.each(c.transports,function(e){return 0===e.indexOf("_")||"webSockets"===e&&!n.TryWebSockets||void h.push(e)}),e.isArray(u.transport)?e.each(u.transport,function(n,t){e.inArray(t,h)>=0&&f.push(t)}):"auto"===u.transport?f=h:e.inArray(u.transport,h)>=0&&f.push(u.transport),i(f)};return v(a,b)}(),g.promise()},starting:function(n){var t=this;return e(t).bind(p.onStarting,function(e,r){n.call(t)}),t},send:function(e){var n=this;if(n.state===c.connectionState.disconnected)throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");if(n.state===c.connectionState.connecting)throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");return n.transport.send(n,e),n},received:function(n){var t=this;return e(t).bind(p.onReceived,function(e,r){n.call(t,r)}),t},stateChanged:function(n){var t=this;return e(t).bind(p.onStateChanged,function(e,r){n.call(t,r)}),t},error:function(n){var t=this;return e(t).bind(p.onError,function(e,r,o){t.lastError=r,n.call(t,r,o)}),t},disconnected:function(n){var t=this;return e(t).bind(p.onDisconnect,function(e,r){n.call(t)}),t},connectionSlow:function(n){var t=this;return e(t).bind(p.onConnectionSlow,function(e,r){n.call(t)}),t},reconnecting:function(n){var t=this;return e(t).bind(p.onReconnecting,function(e,r){n.call(t)}),t},reconnected:function(n){var t=this;return e(t).bind(p.onReconnect,function(e,r){n.call(t)}),t},stop:function(t,r){var o=this,i=o._deferral;return o._.deferredStartHandler&&f.unbind("load",o._.deferredStartHandler),delete o._.config,delete o._.deferredStartHandler,l||o._.config&&o._.config.waitForPageLoad!==!0?o.state!==c.connectionState.disconnected?(o.log("Stopping connection."),n.clearTimeout(o._.beatHandle),n.clearInterval(o._.pingIntervalId),o.transport&&(o.transport.stop(o),r!==!1&&o.transport.abort(o,t),b(o)&&c.transports._logic.stopMonitoringKeepAlive(o),o.transport=null),o._.negotiateRequest&&(o._.negotiateRequest.abort(d),delete o._.negotiateRequest),o._.initHandler&&o._.initHandler.stop(),delete o._deferral,delete o.messageId,delete o.groupsToken,delete o.id,delete o._.pingIntervalId,delete o._.lastMessageAt,delete o._.lastActiveAt,o._.connectingMessageBuffer.clear(),e(o).unbind(p.onStart),delete o.accessToken,delete o.protocol,delete o.host,delete o.baseUrl,delete o.wsProtocol,delete o.contentType,o.url=o._originalUrl,o._.redirectQs=null,v(o,o.state,c.connectionState.disconnected),e(o).triggerHandler(p.onDisconnect),o):void 0:(o.log("Stopping connection prior to negotiate."),void(i&&i.reject(c._.error(s.stoppedWhileLoading))))},log:function(e){h(e,this.logging)}},c.fn.init.prototype=c.fn,c.noConflict=function(){return e.connection===c&&(e.connection=u),c},e.connection&&(u=e.connection),e.connection=e.signalR=c}(o,window),function(e,n,t){function o(e){e._.keepAliveData.monitoring&&i(e),c.markActive(e)&&(e._.beatHandle=n.setTimeout(function(){o(e)},e._.beatInterval))}function i(n){var t,r=n._.keepAliveData;n.state===u.connectionState.connected&&(t=(new Date).getTime()-n._.lastMessageAt,t>=r.timeout?(n.log("Keep alive timed out.  Notifying transport that connection has been lost."),n.transport.lostConnection(n)):t>=r.timeoutWarning?r.userNotified||(n.log("Keep alive has been missed, connection may be dead/slow."),e(n).triggerHandler(l.onConnectionSlow),r.userNotified=!0):r.userNotified=!1)}function a(e,n){var t=e.url+n;return e.transport&&(t+="?transport="+e.transport.name),c.prepareQueryString(e,t)}function s(e){this.connection=e,this.startRequested=!1,this.startCompleted=!1,this.connectionStopped=!1}var c,u=e.signalR,l=e.signalR.events,f=e.signalR.changeState,d="__Start Aborted__";u.transports={},s.prototype={start:function(e,r,o){var i=this,a=i.connection,s=!1;return i.startRequested||i.connectionStopped?void a.log("WARNING! "+e.name+" transport cannot be started. Initialization ongoing or completed."):(a.log(e.name+" transport starting."),e.start(a,function(){s||i.initReceived(e,r)},function(n){return s||(s=!0,i.transportFailed(e,n,o)),!i.startCompleted||i.connectionStopped}),void(i.transportTimeoutHandle=n.setTimeout(function(){s||(s=!0,a.log(e.name+" transport timed out when trying to connect."),i.transportFailed(e,t,o))},a._.totalTransportConnectTimeout)))},stop:function(){this.connectionStopped=!0,n.clearTimeout(this.transportTimeoutHandle),u.transports._logic.tryAbortStartRequest(this.connection)},initReceived:function(e,t){var r=this,o=r.connection;return r.startRequested?void o.log("WARNING! The client received multiple init messages."):void(r.connectionStopped||(r.startRequested=!0,n.clearTimeout(r.transportTimeoutHandle),o.log(e.name+" transport connected. Initiating start request."),u.transports._logic.ajaxStart(o,function(){r.startCompleted=!0,t()})))},transportFailed:function(t,r,o){var i,a=this.connection,s=a._deferral;this.connectionStopped||(n.clearTimeout(this.transportTimeoutHandle),this.startRequested?this.startCompleted||(i=u._.error(u.resources.errorDuringStartRequest,r),a.log(t.name+" transport failed during the start request. Stopping the connection."),e(a).triggerHandler(l.onError,[i]),s&&s.reject(i),a.stop()):(t.stop(a),a.log(t.name+" transport failed to connect. Attempting to fall back."),o()))}},c=u.transports._logic={ajax:function(n,t){return e.ajax(e.extend(!0,{},e.signalR.ajaxDefaults,{type:"GET",data:{},xhrFields:{withCredentials:n.withCredentials},contentType:n.contentType,dataType:n.ajaxDataType},t))},pingServer:function(n){var t,r,o=e.Deferred();return n.transport?(t=n.url+"/ping",t=c.addQs(t,n.qs),r=c.ajax(n,{url:t,headers:n.accessToken?{Authorization:"Bearer "+n.accessToken}:{},success:function(e){var t;try{t=n._parseResponse(e)}catch(i){return o.reject(u._.transportError(u.resources.pingServerFailedParse,n.transport,i,r)),void n.stop()}"pong"===t.Response?o.resolve():o.reject(u._.transportError(u._.format(u.resources.pingServerFailedInvalidResponse,e),n.transport,null,r))},error:function(e){401===e.status||403===e.status?(o.reject(u._.transportError(u._.format(u.resources.pingServerFailedStatusCode,e.status),n.transport,e,r)),n.stop()):o.reject(u._.transportError(u.resources.pingServerFailed,n.transport,e,r))}})):o.reject(u._.transportError(u.resources.noConnectionTransport,n.transport)),o.promise()},prepareQueryString:function(e,t){var r;return r=c.addQs(t,"clientProtocol="+e.clientProtocol),r="string"==typeof e._.redirectQs?c.addQs(r,e._.redirectQs):c.addQs(r,e.qs),e.token&&(r+="&connectionToken="+n.encodeURIComponent(e.token)),e.data&&(r+="&connectionData="+n.encodeURIComponent(e.data)),r},addQs:function(n,t){var o,i=n.indexOf("?")!==-1?"&":"?";if(!t)return n;if("object"===("undefined"==typeof t?"undefined":r(t)))return n+i+e.param(t);if("string"==typeof t)return o=t.charAt(0),"?"!==o&&"&"!==o||(i=""),n+i+t;throw new Error("Query string property must be either a string or object.")},getUrl:function(e,t,r,o,i){var a="webSockets"===t?"":e.baseUrl,s=a+e.appRelativeUrl,u="transport="+t;return!i&&e.groupsToken&&(u+="&groupsToken="+n.encodeURIComponent(e.groupsToken)),r?(s+=o?"/poll":"/reconnect",!i&&e.messageId&&(u+="&messageId="+n.encodeURIComponent(e.messageId))):s+="/connect",s+="?"+u,s=c.prepareQueryString(e,s),e.transport&&e.accessToken&&("serverSentEvents"!==e.transport.name&&"webSockets"!==e.transport.name||(s+="&access_token="+n.encodeURIComponent(e.accessToken))),i||(s+="&tid="+Math.floor(11*Math.random())),s},maximizePersistentResponse:function(e){return{MessageId:e.C,Messages:e.M,Initialized:"undefined"!=typeof e.S,ShouldReconnect:"undefined"!=typeof e.T,LongPollDelay:e.L,GroupsToken:e.G,Error:e.E}},updateGroups:function(e,n){n&&(e.groupsToken=n)},stringifySend:function(e,n){return"string"==typeof n||"undefined"==typeof n||null===n?n:e.json.stringify(n)},ajaxSend:function(n,t){var r,o=c.stringifySend(n,t),i=a(n,"/send"),s=function(n,o){e(o).triggerHandler(l.onError,[u._.transportError(u.resources.sendFailed,o.transport,n,r),t])};return r=c.ajax(n,{url:i,type:"jsonp"===n.ajaxDataType?"GET":"POST",contentType:u._.defaultContentType,headers:n.accessToken?{Authorization:"Bearer "+n.accessToken}:{},data:{data:o},success:function(e){var t;if(e){try{t=n._parseResponse(e)}catch(r){return s(r,n),void n.stop()}c.triggerReceived(n,t)}},error:function(e,t){"abort"!==t&&"parsererror"!==t&&s(e,n)}})},ajaxAbort:function(e,n){if("undefined"!=typeof e.transport){n="undefined"==typeof n||n;var t=a(e,"/abort");c.ajax(e,{url:t,async:n,timeout:1e3,type:"POST",headers:e.accessToken?{Authorization:"Bearer "+e.accessToken}:{},dataType:"text"}),e.log("Fired ajax abort async = "+n+".")}},ajaxStart:function(n,t){var r=function(e){var t=n._deferral;t&&t.reject(e)},o=function(t){n.log("The start request failed. Stopping the connection."),e(n).triggerHandler(l.onError,[t]),r(t),n.stop()};n._.startRequest=c.ajax(n,{url:a(n,"/start"),headers:n.accessToken?{Authorization:"Bearer "+n.accessToken}:{},success:function(e,r,i){var a;try{a=n._parseResponse(e)}catch(s){return void o(u._.error(u._.format(u.resources.errorParsingStartResponse,e),s,i))}"started"===a.Response?t():o(u._.error(u._.format(u.resources.invalidStartResponse,e),null,i))},error:function(e,t,i){t!==d?o(u._.error(u.resources.errorDuringStartRequest,i,e)):(n.log("The start request aborted because connection.stop() was called."),r(u._.error(u.resources.stoppedDuringStartRequest,null,e)))}})},tryAbortStartRequest:function(e){e._.startRequest&&(e._.startRequest.abort(d),delete e._.startRequest)},tryInitialize:function(e,n,t){n.Initialized&&t?t():n.Initialized&&e.log("WARNING! The client received an init message after reconnecting.")},triggerReceived:function(n,t){n._.connectingMessageBuffer.tryBuffer(t)||e(n).triggerHandler(l.onReceived,[t])},processMessages:function(n,t,r){var o;if(t&&"undefined"!=typeof t.I)return void c.triggerReceived(n,t);if(c.markLastMessage(n),t){if(o=c.maximizePersistentResponse(t),o.Error)return n.log("Received an error message from the server: "+t.E),e(n).triggerHandler(u.events.onError,[u._.error(t.E,"ServerError")]),void n.stop(!1,!1);c.updateGroups(n,o.GroupsToken),o.MessageId&&(n.messageId=o.MessageId),o.Messages&&(e.each(o.Messages,function(e,t){c.triggerReceived(n,t)}),c.tryInitialize(n,o,r))}},monitorKeepAlive:function(n){var t=n._.keepAliveData;t.monitoring?n.log("Tried to monitor keep alive but it's already being monitored."):(t.monitoring=!0,c.markLastMessage(n),n._.keepAliveData.reconnectKeepAliveUpdate=function(){c.markLastMessage(n)},e(n).bind(l.onReconnect,n._.keepAliveData.reconnectKeepAliveUpdate),n.log("Now monitoring keep alive with a warning timeout of "+t.timeoutWarning+", keep alive timeout of "+t.timeout+" and disconnecting timeout of "+n.disconnectTimeout))},stopMonitoringKeepAlive:function(n){var t=n._.keepAliveData;t.monitoring&&(t.monitoring=!1,e(n).unbind(l.onReconnect,n._.keepAliveData.reconnectKeepAliveUpdate),n._.keepAliveData={},n.log("Stopping the monitoring of the keep alive."))},startHeartbeat:function(e){e._.lastActiveAt=(new Date).getTime(),o(e)},markLastMessage:function(e){e._.lastMessageAt=(new Date).getTime()},markActive:function(e){return!!c.verifyLastActive(e)&&(e._.lastActiveAt=(new Date).getTime(),!0)},isConnectedOrReconnecting:function(e){return e.state===u.connectionState.connected||e.state===u.connectionState.reconnecting},ensureReconnectingState:function(n){return f(n,u.connectionState.connected,u.connectionState.reconnecting)===!0&&e(n).triggerHandler(l.onReconnecting),n.state===u.connectionState.reconnecting},clearReconnectTimeout:function(e){e&&e._.reconnectTimeout&&(n.clearTimeout(e._.reconnectTimeout),delete e._.reconnectTimeout)},verifyLastActive:function(n){if((new Date).getTime()-n._.lastActiveAt>=n.reconnectWindow){var t=u._.format(u.resources.reconnectWindowTimeout,new Date(n._.lastActiveAt),n.reconnectWindow);return n.log(t),e(n).triggerHandler(l.onError,[u._.error(t,"TimeoutException")]),n.stop(!1,!1),!1}return!0},reconnect:function(e,t){var r=u.transports[t];if(c.isConnectedOrReconnecting(e)&&!e._.reconnectTimeout){if(!c.verifyLastActive(e))return;e._.reconnectTimeout=n.setTimeout(function(){c.verifyLastActive(e)&&(r.stop(e),c.ensureReconnectingState(e)&&(e.log(t+" reconnecting."),r.start(e)))},e.reconnectDelay)}},handleParseFailure:function(n,t,r,o,i){var a=u._.transportError(u._.format(u.resources.parseFailed,t),n.transport,r,i);o&&o(a)?n.log("Failed to parse server response while attempting to connect."):(e(n).triggerHandler(l.onError,[a]),n.stop())},initHandler:function(e){return new s(e)},foreverFrame:{count:0,connections:{}}}}(o,window),function(e,n,t){var r=e.signalR,o=e.signalR.events,i=e.signalR.changeState,a=r.transports._logic;r.transports.webSockets={name:"webSockets",supportsKeepAlive:function(){return!0},send:function(n,t){var i=a.stringifySend(n,t);try{n.socket.send(i)}catch(s){e(n).triggerHandler(o.onError,[r._.transportError(r.resources.webSocketsInvalidState,n.transport,s,n.socket),t])}},start:function(t,s,c){var u,l=!1,f=this,d=!s,p=e(t);return n.WebSocket?void(t.socket||(u=t.webSocketServerUrl?t.webSocketServerUrl:t.wsProtocol+t.host,u+=a.getUrl(t,this.name,d),t.log("Connecting to websocket endpoint '"+u+"'."),t.socket=new n.WebSocket(u),t.socket.onopen=function(){l=!0,t.log("Websocket opened."),a.clearReconnectTimeout(t),i(t,r.connectionState.reconnecting,r.connectionState.connected)===!0&&p.triggerHandler(o.onReconnect)},t.socket.onclose=function(n){var i;this===t.socket&&(l&&"undefined"!=typeof n.wasClean&&n.wasClean===!1?(i=r._.transportError(r.resources.webSocketClosed,t.transport,n),t.log("Unclean disconnect from websocket: "+(n.reason||"[no reason given]."))):t.log("Websocket closed."),c&&c(i)||(i&&e(t).triggerHandler(o.onError,[i]),f.reconnect(t)))},t.socket.onmessage=function(e){var n;try{n=t._parseResponse(e.data)}catch(r){return void a.handleParseFailure(t,e.data,r,c,e)}n&&a.processMessages(t,n,s)})):void c()},reconnect:function(e){a.reconnect(e,this.name)},lostConnection:function(e){this.reconnect(e)},stop:function(e){a.clearReconnectTimeout(e),e.socket&&(e.log("Closing the Websocket."),e.socket.close(),e.socket=null)},abort:function(e,n){a.ajaxAbort(e,n)}}}(o,window),function(e,n,t){var r=e.signalR,o=e.signalR.events,i=e.signalR.changeState,a=r.transports._logic,s=function(e){n.clearTimeout(e._.reconnectAttemptTimeoutHandle),delete e._.reconnectAttemptTimeoutHandle};r.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:function(){return!0},timeOut:3e3,start:function(t,c,u){var l,f=this,d=!1,p=e(t),g=!c;if(t.eventSource&&(t.log("The connection already has an event source. Stopping it."),t.stop()),!n.EventSource)return void(u&&(t.log("This browser doesn't support SSE."),u()));l=a.getUrl(t,this.name,g);try{t.log("Attempting to connect to SSE endpoint '"+l+"'."),t.eventSource=new n.EventSource(l,{withCredentials:t.withCredentials})}catch(h){return t.log("EventSource failed trying to connect with error "+h.Message+"."),void(u?u():(p.triggerHandler(o.onError,[r._.transportError(r.resources.eventSourceFailedToConnect,t.transport,h)]),g&&f.reconnect(t)))}g&&(t._.reconnectAttemptTimeoutHandle=n.setTimeout(function(){d===!1&&t.eventSource.readyState!==n.EventSource.OPEN&&f.reconnect(t)},f.timeOut)),t.eventSource.addEventListener("open",function(e){t.log("EventSource connected."),s(t),a.clearReconnectTimeout(t),d===!1&&(d=!0,i(t,r.connectionState.reconnecting,r.connectionState.connected)===!0&&p.triggerHandler(o.onReconnect))},!1),t.eventSource.addEventListener("message",function(e){var n;if("initialized"!==e.data){try{n=t._parseResponse(e.data)}catch(r){return void a.handleParseFailure(t,e.data,r,u,e)}a.processMessages(t,n,c)}},!1),t.eventSource.addEventListener("error",function(e){var i=r._.transportError(r.resources.eventSourceError,t.transport,e);this===t.eventSource&&(u&&u(i)||(t.log("EventSource readyState: "+t.eventSource.readyState+"."),e.eventPhase===n.EventSource.CLOSED?(t.log("EventSource reconnecting due to the server connection ending."),f.reconnect(t)):(t.log("EventSource error."),p.triggerHandler(o.onError,[i]))))},!1)},reconnect:function(e){a.reconnect(e,this.name)},lostConnection:function(e){this.reconnect(e)},send:function(e,n){a.ajaxSend(e,n)},stop:function(e){s(e),a.clearReconnectTimeout(e),e&&e.eventSource&&(e.log("EventSource calling close()."),e.eventSource.close(),e.eventSource=null,delete e.eventSource)},abort:function(e,n){a.ajaxAbort(e,n)}}}(o,window),function(e,n,t){var r=e.signalR,o=e.signalR.events,i=e.signalR.changeState,a=r.transports._logic,s=function(){var e=n.document.createElement("iframe");return e.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;"),e},c=function(){var e=null,t=1e3,o=0;return{prevent:function(){r._.ieVersion<=8&&(0===o&&(e=n.setInterval(function(){var e=s();n.document.body.appendChild(e),n.document.body.removeChild(e),e=null},t)),o++)},cancel:function(){1===o&&n.clearInterval(e),o>0&&o--}}}();r.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:function(){return!0},iframeClearThreshold:50,start:function(e,t,r){if(e.accessToken)return void(r&&(e.log("Forever Frame does not support connections that require a Bearer token to connect, such as the Azure SignalR Service."),r()));var o,i=this,u=a.foreverFrame.count+=1,l=s(),f=function(){e.log("Forever frame iframe finished loading and is no longer receiving messages."),r&&r()||i.reconnect(e)};return n.EventSource?void(r&&(e.log("Forever Frame is not supported by SignalR on browsers with SSE support."),r())):(l.setAttribute("data-signalr-connection-id",e.id),c.prevent(),o=a.getUrl(e,this.name),o+="&frameId="+u,n.document.documentElement.appendChild(l),e.log("Binding to iframe's load event."),l.addEventListener?l.addEventListener("load",f,!1):l.attachEvent&&l.attachEvent("onload",f),l.src=o,a.foreverFrame.connections[u]=e,e.frame=l,e.frameId=u,void(t&&(e.onSuccess=function(){e.log("Iframe transport started."),t()})))},reconnect:function(e){var t=this;a.isConnectedOrReconnecting(e)&&a.verifyLastActive(e)&&n.setTimeout(function(){if(a.verifyLastActive(e)&&e.frame&&a.ensureReconnectingState(e)){var n=e.frame,r=a.getUrl(e,t.name,!0)+"&frameId="+e.frameId;e.log("Updating iframe src to '"+r+"'."),n.src=r}},e.reconnectDelay)},lostConnection:function(e){this.reconnect(e)},send:function(e,n){a.ajaxSend(e,n)},receive:function(n,t){var o,i,s;if(n.json!==n._originalJson&&(t=n._originalJson.stringify(t)),s=n._parseResponse(t),a.processMessages(n,s,n.onSuccess),n.state===e.signalR.connectionState.connected&&(n.frameMessageCount=(n.frameMessageCount||0)+1,n.frameMessageCount>r.transports.foreverFrame.iframeClearThreshold&&(n.frameMessageCount=0,o=n.frame.contentWindow||n.frame.contentDocument,o&&o.document&&o.document.body)))for(i=o.document.body;i.firstChild;)i.removeChild(i.firstChild)},stop:function(e){var t=null;if(c.cancel(),e.frame){if(e.frame.stop)e.frame.stop();else try{t=e.frame.contentWindow||e.frame.contentDocument,t.document&&t.document.execCommand&&t.document.execCommand("Stop")}catch(r){e.log("Error occurred when stopping foreverFrame transport. Message = "+r.message+".")}e.frame.parentNode===n.document.documentElement&&n.document.documentElement.removeChild(e.frame),delete a.foreverFrame.connections[e.frameId],e.frame=null,e.frameId=null,delete e.frame,delete e.frameId,delete e.onSuccess,delete e.frameMessageCount,e.log("Stopping forever frame.")}},abort:function(e,n){a.ajaxAbort(e,n)},getConnection:function(e){return a.foreverFrame.connections[e]},started:function(n){i(n,r.connectionState.reconnecting,r.connectionState.connected)===!0&&e(n).triggerHandler(o.onReconnect)}}}(o,window),function(e,n,t){var r=e.signalR,o=e.signalR.events,i=e.signalR.changeState,a=e.signalR.isDisconnecting,s=r.transports._logic;r.transports.longPolling={name:"longPolling",supportsKeepAlive:function(){return!1},reconnectDelay:3e3,start:function(t,c,u){var l=this,f=function(){f=e.noop,t.log("LongPolling connected."),c?c():t.log("WARNING! The client received an init message after reconnecting.")},d=function(e){return!!u(e)&&(t.log("LongPolling failed to connect."),!0)},p=t._,g=0,h=function(t){n.clearTimeout(p.reconnectTimeoutId),p.reconnectTimeoutId=null,i(t,r.connectionState.reconnecting,r.connectionState.connected)===!0&&(t.log("Raising the reconnect event"),e(t).triggerHandler(o.onReconnect))},v=36e5;t.pollXhr&&(t.log("Polling xhr requests already exists, aborting."),t.stop()),t.messageId=null,p.reconnectTimeoutId=null,p.pollTimeoutId=n.setTimeout(function(){!function i(c,u){var m=c.messageId,b=null===m,y=!b,S=!u,w=s.getUrl(c,l.name,y,S,!0),T={};c.messageId&&(T.messageId=c.messageId),c.groupsToken&&(T.groupsToken=c.groupsToken),a(c)!==!0&&(t.log("Opening long polling request to '"+w+"'."),c.pollXhr=s.ajax(t,{xhrFields:{onprogress:function(){s.markLastMessage(t)}},url:w,type:"POST",contentType:r._.defaultContentType,data:T,timeout:t._.pollTimeout,headers:t.accessToken?{Authorization:"Bearer "+t.accessToken}:{},success:function(r){var o,u,l,v=0;t.log("Long poll complete."),g=0;try{o=t._parseResponse(r)}catch(m){return void s.handleParseFailure(c,r,m,d,c.pollXhr)}null!==p.reconnectTimeoutId&&h(c),o&&(u=s.maximizePersistentResponse(o)),s.processMessages(c,o,f),u&&"number"===e.type(u.LongPollDelay)&&(v=u.LongPollDelay),a(c)!==!0&&(l=u&&u.ShouldReconnect,l&&!s.ensureReconnectingState(c)||(v>0?p.pollTimeoutId=n.setTimeout(function(){i(c,l)},v):i(c,l)))},error:function _(a,u){var _=r._.transportError(r.resources.longPollFailed,t.transport,a,c.pollXhr);if(n.clearTimeout(p.reconnectTimeoutId),p.reconnectTimeoutId=null,"abort"===u)return void t.log("Aborted xhr request.");if(!d(_)){if(g++,t.state!==r.connectionState.reconnecting&&(t.log("An error occurred using longPolling. Status = "+u+".  Response = "+a.responseText+"."),e(c).triggerHandler(o.onError,[_])),(t.state===r.connectionState.connected||t.state===r.connectionState.reconnecting)&&!s.verifyLastActive(t))return;if(!s.ensureReconnectingState(c))return;p.pollTimeoutId=n.setTimeout(function(){i(c,!0)},l.reconnectDelay)}}}),y&&u===!0&&(p.reconnectTimeoutId=n.setTimeout(function(){h(c)},Math.min(1e3*(Math.pow(2,g)-1),v))))}(t)},250)},lostConnection:function(e){e.pollXhr&&e.pollXhr.abort("lostConnection")},send:function(e,n){s.ajaxSend(e,n)},stop:function(e){n.clearTimeout(e._.pollTimeoutId),n.clearTimeout(e._.reconnectTimeoutId),delete e._.pollTimeoutId,delete e._.reconnectTimeoutId,e.pollXhr&&(e.pollXhr.abort(),e.pollXhr=null,delete e.pollXhr)},abort:function(e,n){s.ajaxAbort(e,n)}}}(o,window),function(e,n,t){function r(e){return e+d}function o(e,n,t){var r,o=e.length,i=[];for(r=0;r<o;r+=1)e.hasOwnProperty(r)&&(i[r]=n.call(t,e[r],r,e));return i}function i(n){return e.isFunction(n)?null:"undefined"===e.type(n)?null:n}function a(e){for(var n in e)if(e.hasOwnProperty(n))return!0;return!1}function s(e,n){var t,r=e._.invocationCallbacks;a(r)&&e.log("Clearing hub invocation callbacks with error: "+n+"."),e._.invocationCallbackId=0,delete e._.invocationCallbacks,e._.invocationCallbacks={};for(var o in r)t=r[o],t.method.call(t.scope,{E:n})}function c(n){return e.isFunction(n)&&n.toString().slice(0,256).indexOf("// Call the client hub method")>=0}function u(e,n){return new u.fn.init(e,n)}function l(n,t){var r={qs:null,logging:!1,useDefaultPath:!0};return e.extend(r,t),n&&!r.useDefaultPath||(n=(n||"")+"/signalr"),new l.fn.init(n,r)}var f=0,d=".hubProxy",p=e.signalR;u.fn=u.prototype={init:function(e,n){this.state={},this.connection=e,this.hubName=n,this._={callbackMap:{}}},constructor:u,hasSubscriptions:function(){return a(this._.callbackMap)},on:function(n,t,o){var i=this,a=i._.callbackMap,s=!o&&c(t);o=o||t,o._signalRGuid||(o._signalRGuid=f++),n=n.toLowerCase();var u=a[n];u||(u=[],a[n]=u);for(var l,d=0;d<u.length;d++)(u[d].guid===o._signalRGuid||s&&u[d].isFromOldGeneratedHubProxy)&&(l=u[d]);l||(l={guid:o._signalRGuid,eventHandlers:[],isFromOldGeneratedHubProxy:s},a[n].push(l));var p=function(e,n){t.apply(i,n)};return l.eventHandlers.push(p),e(i).bind(r(n),p),i},off:function(n,t,o){var i,a=this,s=a._.callbackMap,u=!o&&c(t);if(o=o||t,n=n.toLowerCase(),i=s[n])if(t){for(var l,f,d=0;d<i.length;d++)(i[d].guid===o._signalRGuid||u&&i[d].isFromOldGeneratedHubProxy)&&(f=d,l=i[d]);if(l){for(var p=0;p<l.eventHandlers.length;p++)e(a).unbind(r(n),l.eventHandlers[p]);i.splice(d,1),0===i.length&&delete s[n]}}else t||(e(a).unbind(r(n)),delete s[n]);return a},invoke:function(n){var t=this,r=t.connection,a=e.makeArray(arguments).slice(1),s=o(a,i),c={H:t.hubName,M:n,A:s,I:r._.invocationCallbackId},u=e.Deferred(),l=function(o){var i,a,s=t._maximizeHubResponse(o);e.extend(t.state,s.State),s.Progress?u.notifyWith?u.notifyWith(t,[s.Progress.Data]):r._.progressjQueryVersionLogged||(r.log("A hub method invocation progress update was received but the version of jQuery in use ("+e.prototype.jquery+") does not support progress updates. Upgrade to jQuery 1.7+ to receive progress notifications."),r._.progressjQueryVersionLogged=!0):s.Error?(s.StackTrace&&r.log(s.Error+"\n"+s.StackTrace+"."),i=s.IsHubException?"HubException":"Exception",a=p._.error(s.Error,i),a.data=s.ErrorData,r.log(t.hubName+"."+n+" failed to execute. Error: "+a.message),u.rejectWith(t,[a])):(r.log("Invoked "+t.hubName+"."+n),u.resolveWith(t,[s.Result]))};return r._.invocationCallbacks[r._.invocationCallbackId.toString()]={scope:t,method:l},r._.invocationCallbackId+=1,e.isEmptyObject(t.state)||(c.S=t.state),r.log("Invoking "+t.hubName+"."+n),r.send(c),u.promise()},_maximizeHubResponse:function(e){return{State:e.S,Result:e.R,Progress:e.P?{Id:e.P.I,Data:e.P.D}:null,Id:e.I,IsHubException:e.H,Error:e.E,StackTrace:e.T,ErrorData:e.D}}},u.fn.init.prototype=u.fn,l.fn=l.prototype=e.connection(),l.fn.init=function(n,t){var o={qs:null,logging:!1,useDefaultPath:!0},i=this;e.extend(o,t),e.signalR.fn.init.call(i,n,o.qs,o.logging),i.proxies={},i._.invocationCallbackId=0,i._.invocationCallbacks={},i.received(function(n){var t,o,a,s,c,u;n&&("undefined"!=typeof n.P?(a=n.P.I.toString(),s=i._.invocationCallbacks[a],s&&s.method.call(s.scope,n)):"undefined"!=typeof n.I?(a=n.I.toString(),s=i._.invocationCallbacks[a],s&&(i._.invocationCallbacks[a]=null,delete i._.invocationCallbacks[a],s.method.call(s.scope,n))):(t=this._maximizeClientHubInvocation(n),i.log("Triggering client hub event '"+t.Method+"' on hub '"+t.Hub+"'."),c=t.Hub.toLowerCase(),u=t.Method.toLowerCase(),o=this.proxies[c],e.extend(o.state,t.State),e(o).triggerHandler(r(u),[t.Args])))}),i.error(function(e,n){var t,r;n&&(t=n.I,r=i._.invocationCallbacks[t],r&&(i._.invocationCallbacks[t]=null,delete i._.invocationCallbacks[t],r.method.call(r.scope,{E:e})))}),i.reconnecting(function(){i.transport&&"webSockets"===i.transport.name&&s(i,"Connection started reconnecting before invocation result was received.")}),i.disconnected(function(){
s(i,"Connection was disconnected before invocation result was received.")})},l.fn._maximizeClientHubInvocation=function(e){return{Hub:e.H,Method:e.M,Args:e.A,State:e.S}},l.fn._registerSubscribedHubs=function(){var n=this;n._subscribedToHubs||(n._subscribedToHubs=!0,n.starting(function(){var t=[];e.each(n.proxies,function(e){this.hasSubscriptions()&&(t.push({name:e}),n.log("Client subscribed to hub '"+e+"'."))}),0===t.length&&n.log("No hubs have been subscribed to.  The client will not receive data from hubs.  To fix, declare at least one client side function prior to connection start for each hub you wish to subscribe to."),n.data=n.json.stringify(t)}))},l.fn.createHubProxy=function(e){e=e.toLowerCase();var n=this.proxies[e];return n||(n=u(this,e),this.proxies[e]=n),this._registerSubscribedHubs(),n},l.fn.init.prototype=l.fn,e.hubConnection=l}(o,window),function(e,n){e.signalR.version="2.4.1"}(o);n.hubConnection=o.hubConnection,n.signalR=o.signalR}])});